/* Dynamic colors

Most colors are driven from the following values, meaning that 
the backgrounds, borders, and various shades are 
automatically generated.

- Base color is used for the backgrounds, text and borders.
- Accent color is used for links and some interactive elements.

The colors use HSL (hue, saturation, lightness)

- Hue (0-360 degrees):0 is red, 120 is green, and 240 is blue
- Saturation (0-100%):0% is desaturated, 100% is full saturation
- Lightness (0-100%):0% is black, 100% is white

*/


body {
	--base-h: 210;     /* Base hue - Oxygen default */
	--base-s: 15%;     /* Base saturation */
	--base-l: 98%;     /* Base lightness - 100 is white */

	/* Oxygen default accent - will be overridden by Obsidian's accent color setting */
	--accent-h: 201;   /* Blue-cyan hue (more blue, less green) */
	--accent-s: 59%;   /* Moderate saturation */
	--accent-l: 38%;   /* Lower lightness to match #2c7aaa blue the user approved */
}

.theme-dark,
.theme-light {
	--color-red-rgb: 208,66,85;
	--color-orange-rgb: 213,118,63;
	--color-yellow-rgb: 229,181,103;
	--color-green-rgb: 168,195,115;
	--color-cyan-rgb: 115,187,178;
	--color-blue-rgb: 108,153,187;
	--color-purple-rgb: 158,134,200;
	--color-pink-rgb: 176,82,121;

	--color-red: #d04255;
	--color-orange: #d5763f;
	--color-yellow: #e5b567;
	--color-green: #a8c373;
	--color-cyan: #73bbb2;
	--color-blue: #6c99bb;
	--color-purple: #9e86c8;
	--color-pink: #b05279;
}

/* 
Oxygen light theme as the default base - ensures consistency when Style Settings plugin is disabled
All other light color schemes override this base
*/
.theme-light,
.theme-light.minimal-oxygen-light,
body .excalidraw {
	/* Oxygen light theme colors as the default base */
	--base-l: 98%;

	--bg1: #ffffff;  /* Main content - pure white */
	--bg2: #f7f8fa;  /* Sidebars - subtle cool gray for differentiation */
	
	/* Oxygen light UI colors with subtle blue tint */
	--ui1: #e3e8ef;  /* Borders - light blue-gray */
	--ui2: #d4dce6;  /* Hover - medium light blue-gray */
	--ui3: #c4cdd8;  /* Active - darker blue-gray */

	--bg3: rgba(0, 0, 0, 0.12);  /* Background 3 - black with opacity */

	--tx1: #1a1d23;  /* Primary text - slightly cooler dark */
	--tx2: #5f6b7a;  /* Secondary text - blue-gray */
	--tx3: #a0aab8;  /* Tertiary text - light blue-gray */
	--tx4: #495663;  /* Quaternary text - cool medium gray */

	/* Accent colors use HSL to respect user's accent color setting */
	--ax1: hsl(var(--accent-h), var(--accent-s), var(--accent-l));
	--ax2: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) - 8%));
	--ax3: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) + 6%));

	--hl1: hsla(var(--accent-h), 50%, calc(var(--base-l) - 20%), 30%);
	--hl2: rgba(255, 225, 0, 0.5);  /* Yellow highlight */

	/* Text on accent - depends on accent lightness */
	--sp1: white;

	/* Oxygen light theme overrides */
	--titlebar-background: var(--bg-tab);
	--titlebar-background-focused: var(--bg-tab);
	--ribbon-background: var(--bg-tab);
	
	/* Light theme borders with blue tint */
	--divider-color: #d4dce6;
	--frame-divider-color: #d4dce6;
	--tab-outline-color: #d4dce6;
	--background-modifier-border: #d4dce6;
	--background-modifier-border-hover: #c4cdd8;
	--background-modifier-border-focus: rgba(0, 0, 0, 0.15);
}

/* Commander plugin icon styling for light theme - match default Obsidian icon treatment */
.theme-light .cmdr.clickable-icon {
	color: var(--icon-color) !important;
}

/* In File Explorer context, use muted opacity like other File Explorer icons */
.theme-light .nav-files-container .cmdr.clickable-icon,
.theme-light .nav-action .cmdr.clickable-icon {
	opacity: var(--icon-muted);
}

/* Keep muted opacity on hover to match default File Explorer icon behavior */
.theme-light .nav-files-container .cmdr.clickable-icon:hover,
.theme-light .nav-action .cmdr.clickable-icon:hover {
	opacity: var(--icon-muted);
}

/* Oxygen theme contrast support - ensure Style Settings plugin contrast adjustments work */
.theme-light.minimal-oxygen-light.minimal-light-white {
	--background-primary: white;
	--background-secondary: white;
	--background-secondary-alt: white;
	--ribbon-background: white;
	--titlebar-background: white;
	--mobile-sidebar-background: white;
	--bg1: white;
	--bg2: white;  /* Essential for dropdowns and menus */
	--bg3: rgba(0, 0, 0, 0.05);  /* Light background for interactive elements */
	--background-table-rows: var(--bg2);  /* Table rows use bg2 */
	--interactive-normal: var(--bg3);  /* Interactive elements use bg3 */
	--background-modifier-hover: rgba(0, 0, 0, 0.05);  /* Light hover for white backgrounds */
	--background-modifier-form-field: rgba(0, 0, 0, 0.05);  /* Light form field background */
}

/* Override mobile menu styling for Oxygen all white */
.is-mobile.theme-light.minimal-oxygen-light.minimal-light-white .menu {
	--interactive-normal: var(--bg3);  /* Use our bg3 instead of background-modifier-hover */
}

/* Force white backgrounds for all dropdowns and menus in Oxygen all white */
.theme-light.minimal-oxygen-light.minimal-light-white .menu,
.theme-light.minimal-oxygen-light.minimal-light-white .dropdown,
.theme-light.minimal-oxygen-light.minimal-light-white .menu-item,
.theme-light.minimal-oxygen-light.minimal-light-white .dropdown-item {
	background-color: white;
	--background-secondary: white;
	--background-primary: white;
	--bg2: white;
}

.theme-light.minimal-oxygen-light.minimal-light-tonal {
	--background-secondary: var(--bg1);
	--background-primary-alt: var(--bg3);
	--background-table-rows: var(--bg3);
	--bg2: var(--bg1);  /* Unify sidebar */
}

.theme-light.minimal-oxygen-light.minimal-light-tonal.is-mobile {
	--background-modifier-form-field: var(--bg3);
	--interactive-normal: var(--bg3);
}

.theme-dark.minimal-oxygen-dark.minimal-dark-tonal {
	--ribbon-background: var(--bg1);
	--background-secondary: var(--bg1);
	--background-table-rows: var(--bg3);
	--bg2: var(--bg1);  /* Unify sidebar */
}

.theme-dark.minimal-oxygen-dark.minimal-dark-black {
	--base-d: 0%;
	--titlebar-background: black;
	--background-primary: black;
	--background-secondary: black;
	--background-secondary-alt: black;
	--ribbon-background: black;
	--bg1: black;
	--bg2: black;  /* Unify sidebar */
	--background-modifier-hover: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 10%));
	--tx1: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 75%));
	--tx2: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 50%));
	--tx3: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 25%));
	--ui1: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 12%));
	--ui2: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 20%));
	--ui3: hsl(var(--base-h), var(--base-s), calc(var(--base-d) + 30%));
	--background-primary-alt: var(--bg3);
	--background-table-rows: var(--bg3);
	--modal-border: var(--ui2);
	--active-line-bg: rgba(255,255,255,0.085);
	--background-modifier-form-field: var(--bg3);
	--background-modifier-cover: hsla(var(--base-h), var(--base-s), calc(var(--base-d) + 8%), 0.9);
	--background-modifier-box-shadow: rgba(0, 0, 0, 1);
}

/* High contrast support for light theme */
.theme-light.minimal-oxygen-light.minimal-light-contrast .titlebar,
.theme-light.minimal-oxygen-light.minimal-light-contrast.minimal-status-off .status-bar,
.theme-light.minimal-oxygen-light.minimal-light-contrast.is-mobile .workspace-drawer.mod-left,
.theme-light.minimal-oxygen-light.minimal-light-contrast .mod-left-split,
.theme-light.minimal-oxygen-light.minimal-light-contrast .workspace-ribbon.mod-left:not(.is-collapsed),
.theme-light.minimal-oxygen-light.minimal-light-contrast .theme-dark {
	--tab-container-background: var(--bg2);
	--ribbon-background-collapsed: var(--bg2);
}

.theme-light.minimal-oxygen-light.minimal-light-contrast {
	--workspace-background-translucent: rgba(0,0,0,0.6);
}

/* 
Oxygen theme as the default base - ensures consistency when Style Settings plugin is disabled
All other color schemes override this base
*/
.theme-dark {
	/* Oxygen theme colors as the default base */
	--accent-l: 55%;  /* Slightly darker accent for dark mode */
	--base-h: 220;  /* Slight blue tint for cool grays */
	--base-s: 8%;  /* Subtle saturation */
	--base-l: 20%;

	--bg1: #1c1d1e;  /* Main content - neutral dark gray */
	--bg2: #17191b;  /* Sidebars - slightly darker for subtle differentiation */
	
	/* Oxygen UI colors with subtle cool undertones */
	--ui1: #2d3139;  /* Borders/dividers - cooler dark gray */
	--ui2: #3a404a;  /* Interactive hover - medium cool gray */
	--ui3: #4a5058;  /* Active states - lighter cool gray */

	--bg3: hsla(var(--base-h), var(--base-s), calc(var(--base-l) + 40%), 0.12);

	--tx1: hsl(var(--base-h), calc(var(--base-s) - 10%), calc(var(--base-l) + 67%));
	--tx2: hsl(var(--base-h), calc(var(--base-s) - 20%), calc(var(--base-l) + 45%));
	--tx3: hsl(var(--base-h), calc(var(--base-s) - 10%), calc(var(--base-l) + 20%));
	--tx4: hsl(var(--base-h), calc(var(--base-s) - 10%), calc(var(--base-l) + 50%));

	/* Accent colors use HSL to respect user's accent color setting */
	--ax1: hsl(var(--accent-h), var(--accent-s), var(--accent-l));
	--ax2: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) - 8%));
	--ax3: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) + 6%));

	--hl1: hsla(var(--accent-h), 50%, 40%, 30%);
	--hl2: rgba(255, 177, 80, 0.3);  /* Yellow highlight */

	/* Text on accent - white works for most dark mode accents (55% lightness) */
	--sp1: white;

	/* Oxygen theme overrides */
	--titlebar-background: var(--bg-tab);
	--titlebar-background-focused: var(--bg-tab);
	--ribbon-background: var(--bg-tab);
	
	/* Subtle blue-gray borders */
	--divider-color: #282c34;
	--frame-divider-color: #282c34;
	--tab-outline-color: #282c34;
	--background-modifier-border: #282c34;
	--background-modifier-border-hover: #3a404a;
	--background-modifier-border-focus: rgba(255, 255, 255, 0.15);
}

/* Commander plugin icon styling - match default Obsidian icon treatment */
.cmdr.clickable-icon {
	color: var(--icon-color) !important;
}

/* In File Explorer context, use muted opacity like other File Explorer icons */
.nav-files-container .cmdr.clickable-icon,
.nav-action .cmdr.clickable-icon {
	opacity: var(--icon-muted);
}

/* Keep muted opacity on hover to match default File Explorer icon behavior */
.nav-files-container .cmdr.clickable-icon:hover,
.nav-action .cmdr.clickable-icon:hover {
	opacity: var(--icon-muted);
}


.theme-light.minimal-light-contrast .titlebar,
.theme-light.minimal-light-contrast.minimal-status-off .status-bar,



.theme-light.minimal-light-white {
	--background-primary:         white;
	--background-secondary:       white;
	--background-secondary-alt:   white;
	--ribbon-background:          white;
	--titlebar-background:        white;
	--mobile-sidebar-background:  white;
	--bg1: white;
	--bg2: white;  /* Essential for dropdowns and menus */
	--bg3: rgba(0, 0, 0, 0.05);  /* Light background for interactive elements */
	--background-table-rows:      var(--bg2);  /* Table rows use bg2 */
	--interactive-normal:         var(--bg3);  /* Interactive elements use bg3 */
	--background-modifier-hover:  rgba(0, 0, 0, 0.05);  /* Light hover for white backgrounds */
	--background-modifier-form-field: rgba(0, 0, 0, 0.05);  /* Light form field background */
}

.theme-dark.minimal-dark-black {
	--base-d:0%;

	--titlebar-background:       black;
	--background-primary:        black;
	--background-secondary:      black;
	--background-secondary-alt:  black;
	--ribbon-background:         black;

	--background-modifier-hover:
	hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 10%))
	;

	--tx1:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 75%)
		);

	--tx2:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 50%)
		);

	--tx3:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 25%)
		);


	--ui1:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 12%)
		);

	--ui2:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 20%)
		);

	--ui3:hsl(
		var(--base-h),
		var(--base-s),
		calc(var(--base-d) + 30%)
	);


}

/* 
OBSIDIAN NATIVE VARIABLE MAPPING
================================

This section maps our custom Oxygen variables to Obsidian's native CSS variables
to ensure compatibility with the Style Settings plugin and other Obsidian plugins.

The mapping follows this hierarchy:
1. Style Settings user customizations (highest priority)
2. Obsidian native variables (mapped from Oxygen variables)
3. Oxygen custom variables (fallback)
*/

.theme-light,
.theme-dark {
	/* Background Colors - Map Oxygen variables to Obsidian native */
	--background-primary: var(--bg1);
	--background-primary-alt: var(--bg2);
	--background-secondary: var(--bg2);
	--background-secondary-alt: var(--bg3);
	--background-modifier-border: var(--ui1);
	--background-modifier-form-field: var(--bg1);
	--background-modifier-form-field-highlighted: var(--bg1);
	--background-modifier-box-shadow: var(--ui3);
	--background-modifier-success: var(--color-green);
	--background-modifier-error: var(--color-red);
	--background-modifier-error-hover: var(--color-red);
	--background-modifier-cover: var(--ui3);

	/* Text Colors - Map Oxygen variables to Obsidian native */
	--text-accent: var(--ax1);
	--text-accent-hover: var(--ax2);
	--text-normal: var(--tx1);
	--text-muted: var(--tx2);
	--text-faint: var(--tx3);
	--text-error: var(--color-red);
	--text-error-hover: var(--color-red);
	--text-highlight-bg: var(--hl1);
	--text-highlight-bg-active: var(--hl2);
	--text-selection: var(--hl1);
	--text-on-accent: var(--sp1);

	/* Interactive Colors - Map Oxygen variables to Obsidian native */
	--interactive-normal: var(--ui1);
	--interactive-hover: var(--ui2);
	--interactive-accent: var(--ax1);
	--interactive-accent-hover: var(--ax2);
	--interactive-success: var(--color-green);

	/* Scrollbar Colors - Map Oxygen variables to Obsidian native */
	--scrollbar-bg: var(--ui1);
	--scrollbar-thumb-bg: var(--ui2);
	--scrollbar-active-thumb-bg: var(--ui3);

	/* Additional Obsidian variables that don't have direct Oxygen equivalents */
	--divider-color: var(--ui1);
	--frame-divider-color: var(--ui1);
	--tab-outline-color: var(--ui1);
	--background-modifier-border-hover: var(--ui2);
	--background-modifier-border-focus: var(--ax1);
}

/* 
STYLE SETTINGS COMPATIBILITY LAYER
==================================

This section ensures that when Style Settings plugin is active,
user customizations take precedence over our mapped values.

The CSS cascade ensures this works correctly:
1. User customizations (via Style Settings) are applied last
2. Our mappings provide sensible defaults
3. Oxygen variables remain as the source of truth for internal theme logic
*/

/* When Style Settings is active, it will override the above mappings */
/* The .css-settings-manager class is added by the Style Settings plugin */
/* and will contain user customizations that override our mappings */

